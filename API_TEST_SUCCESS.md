# API繧｢繧ｯ繧ｻ繧ｹ繝・せ繝育ｵ先棡

## 笨・謌仙粥・壹ヰ繝・け繧ｨ繝ｳ繝陰PI縺ｸ縺ｮ繧｢繧ｯ繧ｻ繧ｹ

`{"繝｡繝・そ繝ｼ繧ｸ":"AI-DRBFM 蛻・梵繧ｵ繝ｼ繝舌・"}` 縺ｨ縺・≧繝ｬ繧ｹ繝昴Φ繧ｹ縺瑚ｿ斐▲縺ｦ縺阪∪縺励◆縲・

縺薙ｌ縺ｯ縲∽ｻ･荳九・縺薙→繧呈э蜻ｳ縺励∪縺呻ｼ・

1. 笨・**Cloud Run繧ｵ繝ｼ繝薙せ縺ｸ縺ｮ繧｢繧ｯ繧ｻ繧ｹ縺梧・蜉・*
   - `allUsers`縺ｸ縺ｮ蜈ｬ髢九い繧ｯ繧ｻ繧ｹ縺瑚ｨｭ螳壹＆繧後◆縺九∽ｽ輔ｉ縺九・譁ｹ豕輔〒繧｢繧ｯ繧ｻ繧ｹ縺ｧ縺阪ｋ繧医≧縺ｫ縺ｪ繧翫∪縺励◆

2. 笨・**繝舌ャ繧ｯ繧ｨ繝ｳ繝陰PI縺梧ｭ｣蟶ｸ縺ｫ蜍穂ｽ・*
   - 繝ｫ繝ｼ繝医お繝ｳ繝峨・繧､繝ｳ繝茨ｼ・/`・峨′豁｣蟶ｸ縺ｫ蠢懃ｭ斐＠縺ｦ縺・∪縺・

3. 笨・**隱崎ｨｼ繝溘ラ繝ｫ繧ｦ繧ｧ繧｢縺悟虚菴・*
   - API繧ｭ繝ｼ縺ｪ縺励〒`/api/gemini`縺ｫ繧｢繧ｯ繧ｻ繧ｹ縺吶ｋ縺ｨ縲・01繧ｨ繝ｩ繝ｼ縺瑚ｿ斐＆繧後∪縺・
   - 縺薙ｌ縺ｯ縲∬ｪ崎ｨｼ繝溘ラ繝ｫ繧ｦ繧ｧ繧｢縺梧ｭ｣縺励￥蜍穂ｽ懊＠縺ｦ縺・ｋ縺薙→繧堤､ｺ縺励※縺・∪縺・

## 谺｡縺ｮ繧ｹ繝・ャ繝・

### 繝輔Ο繝ｳ繝医お繝ｳ繝峨°繧陰PI繧貞他縺ｳ蜃ｺ縺・

繝輔Ο繝ｳ繝医お繝ｳ繝会ｼ・ai-drbfm.html`・峨°繧陰PI繧貞他縺ｳ蜃ｺ縺吶→縲∬・蜍慕噪縺ｫAPI繧ｭ繝ｼ縺碁∽ｿ｡縺輔ｌ縺ｾ縺呻ｼ・

```javascript
// ai-drbfm.js縺ｧ閾ｪ蜍慕噪縺ｫ螳溯｡後＆繧後ｋ
fetch('https://ai-drbfm-backend-43iql33sfa-an.a.run.app/api/gemini', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json',
        'X-API-Key': window.BACKEND_API_KEY  // 閾ｪ蜍慕噪縺ｫ霑ｽ蜉縺輔ｌ繧・
    },
    body: JSON.stringify({ ... })
});
```

### 蜍穂ｽ懃｢ｺ隱・

1. **繝悶Λ繧ｦ繧ｶ縺ｧ`ai-drbfm.html`繧帝幕縺・*
2. **繝輔ぃ繧､繝ｫ繧帝∈謚槭＠縺ｦAI蛻・梵繧貞ｮ溯｡・*
3. **API繧ｭ繝ｼ縺梧ｭ｣縺励￥騾∽ｿ｡縺輔ｌ縲∬ｪ崎ｨｼ縺梧・蜉溘☆繧九％縺ｨ繧堤｢ｺ隱・*

## 迴ｾ蝨ｨ縺ｮ迥ｶ諷・

- 笨・Cloud Run繧ｵ繝ｼ繝薙せ縺ｸ縺ｮ繧｢繧ｯ繧ｻ繧ｹ: 謌仙粥
- 笨・繝舌ャ繧ｯ繧ｨ繝ｳ繝陰PI: 豁｣蟶ｸ縺ｫ蜍穂ｽ・
- 笨・隱崎ｨｼ繝溘ラ繝ｫ繧ｦ繧ｧ繧｢: 豁｣蟶ｸ縺ｫ蜍穂ｽ懶ｼ・PI繧ｭ繝ｼ縺ｪ縺励〒縺ｯ401繧ｨ繝ｩ繝ｼ・・
- 笨・API繧ｭ繝ｼ: `Lh8zeq73nXtaiMm5HSy4plGKNoxC9Qru`・医ヵ繝ｭ繝ｳ繝医お繝ｳ繝峨↓險ｭ螳壽ｸ医∩・・

## 繧ｻ繧ｭ繝･繝ｪ繝・ぅ

- 笨・**2螻､繧ｻ繧ｭ繝･繝ｪ繝・ぅ縺悟ｮ溯｣・＆繧後※縺・∪縺・*
  1. Cloud Run繧ｵ繝ｼ繝薙せ縺ｸ縺ｮ繧｢繧ｯ繧ｻ繧ｹ・・allUsers`縺ｫ險ｱ蜿ｯ・・
  2. 繧｢繝励Μ繧ｱ繝ｼ繧ｷ繝ｧ繝ｳ繝ｬ繝吶Ν縺ｮ隱崎ｨｼ・・PI繧ｭ繝ｼ縺ｧ菫晁ｭｷ・・

- 笨・**API繧ｭ繝ｼ縺後↑縺・→縲∝ｮ滄圀縺ｮAPI縺ｯ菴ｿ逕ｨ縺ｧ縺阪∪縺帙ｓ**
  - `/api/gemini`縲～/api/analyze`縺ｪ縺ｩ縺ｮ繧ｨ繝ｳ繝峨・繧､繝ｳ繝医・隱崎ｨｼ縺悟ｿ・ｦ・
  - API繧ｭ繝ｼ縺後↑縺・ｴ蜷医・401繧ｨ繝ｩ繝ｼ縺瑚ｿ斐＆繧後ｋ

## 縺ｾ縺ｨ繧・

繝舌ャ繧ｯ繧ｨ繝ｳ繝陰PI縺ｸ縺ｮ繧｢繧ｯ繧ｻ繧ｹ縺梧・蜉溘＠縲∬ｪ崎ｨｼ繝溘ラ繝ｫ繧ｦ繧ｧ繧｢繧よｭ｣蟶ｸ縺ｫ蜍穂ｽ懊＠縺ｦ縺・∪縺吶・

繝輔Ο繝ｳ繝医お繝ｳ繝峨°繧陰PI繧貞他縺ｳ蜃ｺ縺吶→縲∬・蜍慕噪縺ｫAPI繧ｭ繝ｼ縺碁∽ｿ｡縺輔ｌ縲∬ｪ崎ｨｼ縺瑚｡後ｏ繧後∪縺吶・

縺薙ｌ縺ｧ縲√そ繧ｭ繝･繧｢縺ｪAPI繧｢繧ｯ繧ｻ繧ｹ縺悟ｮ溽樟縺輔ｌ縺ｦ縺・∪縺呻ｼ・
