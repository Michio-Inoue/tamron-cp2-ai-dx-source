# App Engine蛻晄悄蛹門ｾ後・谺｡縺ｮ繧ｹ繝・ャ繝・

## 迴ｾ蝨ｨ縺ｮ迥ｶ諷・
笨・App Engine縺ｮ蛻晄悄蛹門ｮ御ｺ・
笨・繝・ヵ繧ｩ繝ｫ繝医し繝ｼ繝薙せ繧｢繧ｫ繧ｦ繝ｳ繝医′閾ｪ蜍慕噪縺ｫ菴懈・縺輔ｌ縺ｾ縺励◆

## 谺｡縺ｮ繧ｹ繝・ャ繝・

### 繧ｹ繝・ャ繝・: 繝・ヵ繧ｩ繝ｫ繝医し繝ｼ繝薙せ繧｢繧ｫ繧ｦ繝ｳ繝医・繝｡繝ｼ繝ｫ繧｢繝峨Ξ繧ｹ繧堤｢ｺ隱・

1. 莉･荳九・URL縺ｫ繧｢繧ｯ繧ｻ繧ｹ・・
   ```
   https://console.cloud.google.com/iam-admin/serviceaccounts?project=singular-server-480006-s8
   ```

2. 繧ｵ繝ｼ繝薙せ繧｢繧ｫ繧ｦ繝ｳ繝医・荳隕ｧ縺九ｉ縲∽ｻ･荳九・縺・★繧後°縺ｮ蠖｢蠑上・繧｢繧ｫ繧ｦ繝ｳ繝医ｒ謗｢縺励∪縺呻ｼ・
   - `PROJECT_NUMBER@project.gserviceaccount.com`・井ｾ・ `123456789012@project.gserviceaccount.com`・・
   - `singular-server-480006-s8@appspot.gserviceaccount.com`
   - 縲窟pp Engine 繝・ヵ繧ｩ繝ｫ繝医し繝ｼ繝薙せ繧｢繧ｫ繧ｦ繝ｳ繝医阪→縺・≧陦ｨ遉ｺ蜷阪・繧｢繧ｫ繧ｦ繝ｳ繝・

3. **繝｡繝ｼ繝ｫ繧｢繝峨Ξ繧ｹ繧偵さ繝斐・**縺励∪縺呻ｼ域ｬ｡縺ｮ繧ｹ繝・ャ繝励〒菴ｿ逕ｨ縺励∪縺呻ｼ・

### 繧ｹ繝・ャ繝・: Secret Manager縺ｧ讓ｩ髯舌ｒ莉倅ｸ・

1. Secret Manager繝壹・繧ｸ縺ｫ繧｢繧ｯ繧ｻ繧ｹ・・
   ```
   https://console.cloud.google.com/security/secret-manager?project=singular-server-480006-s8
   ```

2. `gemini-api-key` 繧ｷ繝ｼ繧ｯ繝ｬ繝・ヨ繧偵け繝ｪ繝・け

3. 縲梧ｨｩ髯舌阪ち繝悶ｒ繧ｯ繝ｪ繝・け

4. 縲後・繝ｪ繝ｳ繧ｷ繝代Ν繧定ｿｽ蜉縲阪・繧ｿ繝ｳ繧偵け繝ｪ繝・け

5. 莉･荳九・諠・ｱ繧貞・蜉幢ｼ・
   - **譁ｰ縺励＞繝励Μ繝ｳ繧ｷ繝代Ν**: 繧ｹ繝・ャ繝・縺ｧ遒ｺ隱阪＠縺溘し繝ｼ繝薙せ繧｢繧ｫ繧ｦ繝ｳ繝医・繝｡繝ｼ繝ｫ繧｢繝峨Ξ繧ｹ繧定ｲｼ繧贋ｻ倥￠
     - 萓・ `123456789012@project.gserviceaccount.com`
     - 縺ｾ縺溘・: `singular-server-480006-s8@appspot.gserviceaccount.com`
   - **繝ｭ繝ｼ繝ｫ**: 縲郡ecret Manager 繧ｷ繝ｼ繧ｯ繝ｬ繝・ヨ 繧｢繧ｯ繧ｻ繧ｵ繝ｼ縲阪ｒ驕ｸ謚・

6. 縲御ｿ晏ｭ倥阪・繧ｿ繝ｳ繧偵け繝ｪ繝・け

7. 謨ｰ遘偵〒螳御ｺ・＠縺ｾ縺・笨・

### 繧ｹ繝・ャ繝・: 蠢・ｦ√↑API繧呈怏蜉ｹ蛹厄ｼ医∪縺縺ｮ蝣ｴ蜷茨ｼ・

莉･荳九・API縺梧怏蜉ｹ縺ｫ縺ｪ縺｣縺ｦ縺・ｋ縺狗｢ｺ隱搾ｼ・

1. API繝ｩ繧､繝悶Λ繝ｪ繝壹・繧ｸ縺ｫ繧｢繧ｯ繧ｻ繧ｹ・・
   ```
   https://console.cloud.google.com/apis/library?project=singular-server-480006-s8
   ```

2. 莉･荳九・API繧呈､懃ｴ｢縺励※縲√梧怏蜉ｹ縲阪↓縺ｪ縺｣縺ｦ縺・ｋ縺狗｢ｺ隱搾ｼ・
   - **Secret Manager API** 笨・
   - **App Engine Admin API** 笨・
   - **Cloud Build API** 笨・

3. 譛牙柑縺ｫ縺ｪ縺｣縺ｦ縺・↑縺・ｴ蜷医・縲√梧怏蜉ｹ縺ｫ縺吶ｋ縲阪ｒ繧ｯ繝ｪ繝・け

### 繧ｹ繝・ャ繝・: Secret Manager縺ｫAPI繧ｭ繝ｼ縺御ｿ晏ｭ倥＆繧後※縺・ｋ縺狗｢ｺ隱・

1. Secret Manager繝壹・繧ｸ縺ｫ繧｢繧ｯ繧ｻ繧ｹ・・
   ```
   https://console.cloud.google.com/security/secret-manager?project=singular-server-480006-s8
   ```

2. `gemini-api-key` 縺瑚｡ｨ遉ｺ縺輔ｌ縺ｦ縺・ｋ縺狗｢ｺ隱・

3. 蟄伜惠縺励↑縺・ｴ蜷医・縲∽ｽ懈・・・
   - 縲後す繝ｼ繧ｯ繝ｬ繝・ヨ繧剃ｽ懈・縲阪ｒ繧ｯ繝ｪ繝・け
   - 蜷榊燕: `gemini-api-key`
   - 繧ｷ繝ｼ繧ｯ繝ｬ繝・ヨ縺ｮ蛟､: `[REDACTED]`
   - 縲御ｽ懈・縲阪ｒ繧ｯ繝ｪ繝・け

### 繧ｹ繝・ャ繝・: 繝舌ャ繧ｯ繧ｨ繝ｳ繝峨ｒ繝・・繝ｭ繧､

縺吶∋縺ｦ縺ｮ險ｭ螳壹′螳御ｺ・＠縺溘ｉ縲￣owerShell縺ｧ莉･荳九・繧ｳ繝槭Φ繝峨ｒ螳溯｡鯉ｼ・

```powershell
# 繝励Ο繧ｸ繧ｧ繧ｯ繝医ｒ險ｭ螳・
gcloud config set project singular-server-480006-s8

# 繝舌ャ繧ｯ繧ｨ繝ｳ繝峨ョ繧｣繝ｬ繧ｯ繝医Μ縺ｫ遘ｻ蜍・
cd backend

# 繝・・繝ｭ繧､螳溯｡・
gcloud app deploy app.yaml
```

繝・・繝ｭ繧､縺ｫ縺ｯ5縲・0蛻・°縺九ｋ縺薙→縺後≠繧翫∪縺吶・

繝・・繝ｭ繧､縺悟ｮ御ｺ・☆繧九→縲∽ｻ･荳九・繧医≧縺ｪURL縺瑚｡ｨ遉ｺ縺輔ｌ縺ｾ縺呻ｼ・
```
https://singular-server-480006-s8.appspot.com
```

## 繝√ぉ繝・け繝ｪ繧ｹ繝・

繧ｻ繝・ヨ繧｢繝・・縺ｮ遒ｺ隱搾ｼ・

- [ ] App Engine縺ｮ蛻晄悄蛹門ｮ御ｺ・
- [ ] 繝・ヵ繧ｩ繝ｫ繝医し繝ｼ繝薙せ繧｢繧ｫ繧ｦ繝ｳ繝医・繝｡繝ｼ繝ｫ繧｢繝峨Ξ繧ｹ繧堤｢ｺ隱・
- [ ] Secret Manager縺ｧ `gemini-api-key` 縺悟ｭ伜惠
- [ ] 繧ｵ繝ｼ繝薙せ繧｢繧ｫ繧ｦ繝ｳ繝医↓Secret Manager縺ｸ縺ｮ讓ｩ髯舌ｒ莉倅ｸ・
- [ ] 蠢・ｦ√↑API縺梧怏蜉ｹ蛹悶＆繧後※縺・ｋ
- [ ] 繝舌ャ繧ｯ繧ｨ繝ｳ繝峨ｒ繝・・繝ｭ繧､

## 繝医Λ繝悶Ν繧ｷ繝･繝ｼ繝・ぅ繝ｳ繧ｰ

### 繧ｵ繝ｼ繝薙せ繧｢繧ｫ繧ｦ繝ｳ繝医′隕九▽縺九ｉ縺ｪ縺・ｴ蜷・

1. App Engine縺ｮ蛻晄悄蛹悶′螳悟・縺ｫ螳御ｺ・＠縺ｦ縺・ｋ縺狗｢ｺ隱・
2. 繝励Ο繧ｸ繧ｧ繧ｯ繝医′豁｣縺励￥驕ｸ謚槭＆繧後※縺・ｋ縺狗｢ｺ隱・
3. 謨ｰ蛻・ｾ・▲縺ｦ縺九ｉ蜀榊ｺｦ遒ｺ隱・

### 讓ｩ髯舌・莉倅ｸ弱′螟ｱ謨励☆繧句ｴ蜷・

1. 繧ｵ繝ｼ繝薙せ繧｢繧ｫ繧ｦ繝ｳ繝医・繝｡繝ｼ繝ｫ繧｢繝峨Ξ繧ｹ縺梧ｭ｣縺励＞縺狗｢ｺ隱・
2. Secret Manager API縺梧怏蜉ｹ縺ｫ縺ｪ縺｣縺ｦ縺・ｋ縺狗｢ｺ隱・
3. 繝励Ο繧ｸ繧ｧ繧ｯ繝医・謇譛芽・∪縺溘・邱ｨ髮・・ｨｩ髯舌′縺ゅｋ縺狗｢ｺ隱・


