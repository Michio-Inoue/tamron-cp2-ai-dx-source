# Cloud Run 蜈ｬ髢九い繧ｯ繧ｻ繧ｹ縺ｮ險ｭ螳壽婿豕・

## 蝠城｡・
403繧ｨ繝ｩ繝ｼ・育ｦ∵ｭ｢繧ｨ繝ｩ繝ｼ・峨′逋ｺ逕溘＠縺ｦ縺・∪縺吶ゅ％繧後・縲，loud Run繧ｵ繝ｼ繝薙せ縺ｸ縺ｮ蜈ｬ髢九い繧ｯ繧ｻ繧ｹ縺瑚ｨｱ蜿ｯ縺輔ｌ縺ｦ縺・↑縺・◆繧√〒縺吶・

## 隗｣豎ｺ譁ｹ豕・

### 譁ｹ豕・: Google Cloud Console縺九ｉ險ｭ螳夲ｼ域耳螂ｨ・・

1. **Cloud Run 繧ｵ繝ｼ繝薙せ繝壹・繧ｸ繧帝幕縺・*
   - https://console.cloud.google.com/run/detail/asia-northeast1/ai-drbfm-backend?project=tamron-cloudrun-prod-new

2. **縲梧ｨｩ髯舌阪ち繝悶ｒ繧ｯ繝ｪ繝・け**

3. **縲後・繝ｪ繝ｳ繧ｷ繝代Ν繧定ｿｽ蜉縲阪・繧ｿ繝ｳ繧偵け繝ｪ繝・け**

4. **莉･荳九・諠・ｱ繧貞・蜉・*
   - **譁ｰ縺励＞繝励Μ繝ｳ繧ｷ繝代Ν**: `allUsers`
   - **繝ｭ繝ｼ繝ｫ**: `Cloud Run 襍ｷ蜍募・` (roles/run.invoker)

5. **縲御ｿ晏ｭ倥阪ｒ繧ｯ繝ｪ繝・け**

### 譁ｹ豕・: 邨・ｹ斐・繝ｪ繧ｷ繝ｼ縺ｮ遒ｺ隱・

邨・ｹ斐・繝ｪ繧ｷ繝ｼ縺ｧ`allUsers`縺ｸ縺ｮ蜈ｬ髢九い繧ｯ繧ｻ繧ｹ縺悟宛髯舌＆繧後※縺・ｋ蝣ｴ蜷医∫ｵ・ｹ皮ｮ｡逅・・↓萓晞ｼ縺励※莉･荳九・繝昴Μ繧ｷ繝ｼ繧堤｢ｺ隱阪・螟画峩縺吶ｋ蠢・ｦ√′縺ゅｊ縺ｾ縺呻ｼ・

- `constraints/iam.allowedPolicyMemberDomains`
- `constraints/run.allowedIngress`

### 譁ｹ豕・: 隱崎ｨｼ縺悟ｿ・ｦ√↑繧｢繧ｯ繧ｻ繧ｹ縺ｫ縺吶ｋ

蜈ｬ髢九い繧ｯ繧ｻ繧ｹ縺瑚ｨｱ蜿ｯ縺ｧ縺阪↑縺・ｴ蜷医・縲√し繝ｼ繝薙せ繧｢繧ｫ繧ｦ繝ｳ繝医ｒ菴ｿ逕ｨ縺励※隱崎ｨｼ縺吶ｋ蠢・ｦ√′縺ゅｊ縺ｾ縺吶・

1. 繧ｵ繝ｼ繝薙せ繧｢繧ｫ繧ｦ繝ｳ繝医・繧ｭ繝ｼ繧剃ｽ懈・
2. 繝輔Ο繝ｳ繝医お繝ｳ繝峨〒繧ｵ繝ｼ繝薙せ繧｢繧ｫ繧ｦ繝ｳ繝医ｒ菴ｿ逕ｨ縺励※隱崎ｨｼ
3. 隱崎ｨｼ繝医・繧ｯ繝ｳ繧剃ｽｿ逕ｨ縺励※API繧貞他縺ｳ蜃ｺ縺・

## 迴ｾ蝨ｨ縺ｮ迥ｶ諷・

- **繧ｵ繝ｼ繝薙せURL**: `https://ai-drbfm-backend-43iql33sfa-an.a.run.app`
- **IAM讓ｩ髯・*: `cloud-run-invoker-new@tamron-cloudrun-prod-new.iam.gserviceaccount.com`縺ｫ`roles/run.invoker`讓ｩ髯舌′莉倅ｸ弱＆繧後※縺・∪縺・
- **蜈ｬ髢九い繧ｯ繧ｻ繧ｹ**: 譛ｪ險ｭ螳夲ｼ育ｵ・ｹ斐・繝ｪ繧ｷ繝ｼ縺ｧ蛻ｶ髯舌＆繧後※縺・ｋ蜿ｯ閭ｽ諤ｧ縺後≠繧翫∪縺呻ｼ・

## 谺｡縺ｮ繧ｹ繝・ャ繝・

1. Google Cloud Console縺九ｉ`allUsers`縺ｸ縺ｮ蜈ｬ髢九い繧ｯ繧ｻ繧ｹ繧定ｨｭ螳壹＠縺ｦ縺上□縺輔＞
2. 險ｭ螳壼ｾ後√ヵ繝ｭ繝ｳ繝医お繝ｳ繝峨°繧峨ヰ繝・け繧ｨ繝ｳ繝陰PI縺ｫ繧｢繧ｯ繧ｻ繧ｹ縺ｧ縺阪ｋ縺狗｢ｺ隱阪＠縺ｦ縺上□縺輔＞
