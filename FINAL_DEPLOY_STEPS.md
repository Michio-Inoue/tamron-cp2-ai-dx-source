# 譛邨ゅせ繝・ャ繝・ 繝・・繝ｭ繧､貅門ｙ縺ｨ螳溯｡・

## 螳御ｺ・＠縺滄・岼
笨・App Engine縺ｮ蛻晄悄蛹門ｮ御ｺ・
笨・繧ｵ繝ｼ繝薙せ繧｢繧ｫ繧ｦ繝ｳ繝医・遒ｺ隱榊ｮ御ｺ・
笨・Secret Manager縺ｸ縺ｮ讓ｩ髯蝉ｻ倅ｸ主ｮ御ｺ・

## 谺｡縺ｮ繧ｹ繝・ャ繝・

### 繧ｹ繝・ャ繝・: 蠢・ｦ√↑API縺梧怏蜉ｹ蛹悶＆繧後※縺・ｋ縺狗｢ｺ隱・

1. API繝ｩ繧､繝悶Λ繝ｪ繝壹・繧ｸ縺ｫ繧｢繧ｯ繧ｻ繧ｹ・・
   ```
   https://console.cloud.google.com/apis/library?project=singular-server-480006-s8
   ```

2. 莉･荳九・API繧呈､懃ｴ｢縺励※縲√梧怏蜉ｹ縲阪↓縺ｪ縺｣縺ｦ縺・ｋ縺狗｢ｺ隱搾ｼ・
   - **Secret Manager API** 笨・
   - **App Engine Admin API** 笨・
   - **Cloud Build API** 笨・

3. 譛牙柑縺ｫ縺ｪ縺｣縺ｦ縺・↑縺・ｴ蜷医・縲√梧怏蜉ｹ縺ｫ縺吶ｋ縲阪ｒ繧ｯ繝ｪ繝・け

### 繧ｹ繝・ャ繝・: 繝励Ο繧ｸ繧ｧ繧ｯ繝郁ｨｭ螳壹ｒ遒ｺ隱・

PowerShell縺ｧ莉･荳九ｒ螳溯｡後＠縺ｦ縲√・繝ｭ繧ｸ繧ｧ繧ｯ繝医′豁｣縺励￥險ｭ螳壹＆繧後※縺・ｋ縺狗｢ｺ隱搾ｼ・

```powershell
gcloud config set project singular-server-480006-s8
gcloud config get-value project
```

### 繧ｹ繝・ャ繝・: 繝舌ャ繧ｯ繧ｨ繝ｳ繝峨・萓晏ｭ倬未菫ゅｒ遒ｺ隱・

```powershell
cd backend
npm list --depth=0
```

蠢・ｦ√↑繝代ャ繧ｱ繝ｼ繧ｸ縺後う繝ｳ繧ｹ繝医・繝ｫ縺輔ｌ縺ｦ縺・ｋ縺狗｢ｺ隱阪＠縺ｾ縺吶・

### 繧ｹ繝・ャ繝・: 繝舌ャ繧ｯ繧ｨ繝ｳ繝峨ｒ繝・・繝ｭ繧､

縺吶∋縺ｦ縺ｮ貅門ｙ縺梧紛縺｣縺溘ｉ縲√ョ繝励Ο繧､繧貞ｮ溯｡鯉ｼ・

```powershell
# 繝励Ο繧ｸ繧ｧ繧ｯ繝医ｒ險ｭ螳夲ｼ亥ｿｵ縺ｮ縺溘ａ・・
gcloud config set project singular-server-480006-s8

# 繝舌ャ繧ｯ繧ｨ繝ｳ繝峨ョ繧｣繝ｬ繧ｯ繝医Μ縺ｫ遘ｻ蜍・
cd backend

# 繝・・繝ｭ繧､螳溯｡・
gcloud app deploy app.yaml
```

繝・・繝ｭ繧､縺ｫ縺ｯ5縲・0蛻・°縺九ｋ縺薙→縺後≠繧翫∪縺吶・

### 繝・・繝ｭ繧､譎ゅ・遒ｺ隱堺ｺ矩・

繝・・繝ｭ繧､荳ｭ縺ｫ莉･荳九・繝｡繝・そ繝ｼ繧ｸ縺瑚｡ｨ遉ｺ縺輔ｌ繧句ｴ蜷医′縺ゅｊ縺ｾ縺呻ｼ・

1. **縲窟pp Engine縺ｮ蝣ｴ謇繧帝∈謚槭＠縺ｦ縺上□縺輔＞縲・*
   - 繝ｪ繝ｼ繧ｸ繝ｧ繝ｳ繧帝∈謚橸ｼ域耳螂ｨ: `asia-northeast1` 縺ｾ縺溘・ `asia-northeast2`・・

2. **縲後％縺ｮ謫堺ｽ懊↓繧医ｊ隱ｲ驥代′逋ｺ逕溘☆繧句庄閭ｽ諤ｧ縺後≠繧翫∪縺吶・*
   - `Y` 繧貞・蜉帙＠縺ｦ邯夊｡・

3. **繝・・繝ｭ繧､縺ｮ騾ｲ陦檎憾豕・*
   - 繝薙Ν繝峨→繝・・繝ｭ繧､縺ｮ騾ｲ陦檎憾豕√′陦ｨ遉ｺ縺輔ｌ縺ｾ縺・

### 繝・・繝ｭ繧､螳御ｺ・ｾ・

繝・・繝ｭ繧､縺悟ｮ御ｺ・☆繧九→縲∽ｻ･荳九・繧医≧縺ｪURL縺瑚｡ｨ遉ｺ縺輔ｌ縺ｾ縺呻ｼ・
```
https://singular-server-480006-s8.appspot.com
```

縺薙・URL縺ｫ繧｢繧ｯ繧ｻ繧ｹ縺励※縲∽ｻ･荳九′陦ｨ遉ｺ縺輔ｌ繧後・謌仙粥縺ｧ縺呻ｼ・
```json
{"message":"AI-DRBFM Analysis Server"}
```

## 繝医Λ繝悶Ν繧ｷ繝･繝ｼ繝・ぅ繝ｳ繧ｰ

### 繝・・繝ｭ繧､縺悟､ｱ謨励☆繧句ｴ蜷・

1. **繧ｨ繝ｩ繝ｼ繝ｭ繧ｰ繧堤｢ｺ隱・*・・
   ```powershell
   gcloud app logs tail -s default
   ```

2. **繝薙Ν繝峨Ο繧ｰ繧堤｢ｺ隱・*・・
   ```powershell
   gcloud builds list --limit=5
   ```

3. **繧医￥縺ゅｋ繧ｨ繝ｩ繝ｼ**・・
   - **Secret Manager縺ｸ縺ｮ繧｢繧ｯ繧ｻ繧ｹ繧ｨ繝ｩ繝ｼ**: 讓ｩ髯舌′豁｣縺励￥莉倅ｸ弱＆繧後※縺・ｋ縺狗｢ｺ隱・
   - **API縺梧怏蜉ｹ蛹悶＆繧後※縺・↑縺・*: 蠢・ｦ√↑API縺梧怏蜉ｹ縺ｫ縺ｪ縺｣縺ｦ縺・ｋ縺狗｢ｺ隱・
   - **萓晏ｭ倬未菫ゅ・繧ｨ繝ｩ繝ｼ**: `npm install` 繧貞・螳溯｡・

### Secret Manager縺九ｉAPI繧ｭ繝ｼ縺悟叙蠕励〒縺阪↑縺・ｴ蜷・

1. Secret Manager縺ｧ `gemini-api-key` 縺悟ｭ伜惠縺吶ｋ縺狗｢ｺ隱・
2. 繧ｵ繝ｼ繝薙せ繧｢繧ｫ繧ｦ繝ｳ繝医↓讓ｩ髯舌′莉倅ｸ弱＆繧後※縺・ｋ縺狗｢ｺ隱・
3. `app.yaml` 縺ｮ `GEMINI_API_KEY_SECRET_NAME` 縺梧ｭ｣縺励＞縺狗｢ｺ隱・

## 繝・・繝ｭ繧､蠕後・遒ｺ隱・

1. **繝舌ャ繧ｯ繧ｨ繝ｳ繝陰PI縺悟虚菴懊＠縺ｦ縺・ｋ縺狗｢ｺ隱・*・・
   ```
   https://singular-server-480006-s8.appspot.com/
   ```

2. **Gemini API繝励Ο繧ｭ繧ｷ縺悟虚菴懊＠縺ｦ縺・ｋ縺狗｢ｺ隱・*・・
   - 繝輔Ο繝ｳ繝医お繝ｳ繝峨°繧峨ヰ繝・け繧ｨ繝ｳ繝陰PI繧貞他縺ｳ蜃ｺ縺・
   - 縺ｾ縺溘・縲￣ostman縺ｪ縺ｩ縺ｧ繝・せ繝・

3. **繝ｭ繧ｰ繧堤｢ｺ隱・*・・
   ```powershell
   gcloud app logs tail -s default
   ```

## 谺｡縺ｮ繧ｹ繝・ャ繝暦ｼ医が繝励す繝ｧ繝ｳ・・

繝・・繝ｭ繧､縺悟ｮ御ｺ・＠縺溘ｉ・・

1. **繝輔Ο繝ｳ繝医お繝ｳ繝峨ｒ繝舌ャ繧ｯ繧ｨ繝ｳ繝陰PI邨檎罰縺ｧ蜻ｼ縺ｳ蜃ｺ縺吶ｈ縺・↓螟画峩**
   - `ai-drbfm.js` 繧呈峩譁ｰ縺励※縲√ヰ繝・け繧ｨ繝ｳ繝陰PI繧貞他縺ｳ蜃ｺ縺吶ｈ縺・↓螟画峩

2. **繧ｫ繧ｹ繧ｿ繝繝峨Γ繧､繝ｳ縺ｮ險ｭ螳・*・医が繝励す繝ｧ繝ｳ・・

3. **繝｢繝九ち繝ｪ繝ｳ繧ｰ縺ｨ繧｢繝ｩ繝ｼ繝医・險ｭ螳・*・医が繝励す繝ｧ繝ｳ・・


